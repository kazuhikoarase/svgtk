{"version":3,"file":"core.js","sources":["../src/core.ts"],"sourcesContent":["//\n// core\n//\n// Copyright (c) 2025 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n\ntype EventListener = (event : {type : string}, detail : any) => void;\n\nexport const extend = function(o : any, ...args : any[]) {\n  for (let i = 0; i < args.length; i += 1) {\n    const a = args[i];\n    for (let k in a) {\n      o[k] = a[k];\n    }\n  }\n  return o;\n};\n\nexport const eventTarget = function() {\n  let listenersMap : { [type : string] : EventListener[]} | null  = null;\n  return {\n    trigger: function(type : string, detail : any) {\n      if (!listenersMap) return;\n      const listeners = listenersMap[type];\n      if (!listeners) return;\n      const event = { type : type };\n      listeners.forEach(function(l) {\n        l(event, detail);\n      });\n    },\n    on: function(type : string, l : EventListener) {\n      listenersMap = (listenersMap || (listenersMap = {}) );\n      (listenersMap[type] || (listenersMap[type] = []) ).push(l);\n    },\n    off: function(type : string, l : EventListener) {\n      if (!listenersMap) return;\n      const listeners = listenersMap[type];\n      if (!listeners) return;\n      listenersMap[type] = listeners.filter(function(_l) {\n        return _l != l;\n      });\n    }\n  };\n};\n"],"names":["extend","o","args","i","a","k","eventTarget","listenersMap","type","detail","listeners","event","l","_l"],"mappings":"gFAaO,MAAMA,EAAS,SAASC,KAAYC,EAAc,CACvD,QAASC,EAAI,EAAGA,EAAID,EAAK,OAAQC,GAAK,EAAG,CACvC,MAAMC,EAAIF,EAAKC,CAAC,EAChB,QAASE,KAAKD,EACZH,EAAEI,CAAC,EAAID,EAAEC,CAAC,CACZ,CAEF,OAAOJ,CACT,EAEaK,EAAc,UAAW,CACpC,IAAIC,EAA8D,KAClE,MAAO,CACL,QAAS,SAASC,EAAeC,EAAc,CAC7C,GAAI,CAACF,EAAc,OACnB,MAAMG,EAAYH,EAAaC,CAAI,EACnC,GAAI,CAACE,EAAW,OAChB,MAAMC,EAAQ,CAAE,KAAAH,CAAA,EAChBE,EAAU,QAAQ,SAASE,EAAG,CAC5BA,EAAED,EAAOF,CAAM,CAAA,CAChB,CAAA,EAEH,GAAI,SAASD,EAAeI,EAAmB,CAC7CL,EAAgBA,IAAiBA,EAAe,KAC/CA,EAAaC,CAAI,IAAMD,EAAaC,CAAI,EAAI,CAAA,IAAM,KAAKI,CAAC,CAAA,EAE3D,IAAK,SAASJ,EAAeI,EAAmB,CAC9C,GAAI,CAACL,EAAc,OACnB,MAAMG,EAAYH,EAAaC,CAAI,EAC9BE,IACLH,EAAaC,CAAI,EAAIE,EAAU,OAAO,SAASG,EAAI,CACjD,OAAOA,GAAMD,CAAA,CACd,EAAA,CACH,CAEJ"}