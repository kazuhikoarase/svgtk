{"version":3,"file":"svgtk.js","sources":["../src/core.ts","../src/math.ts","../src/mat4.ts","../src/util.ts","../src/svgtk.ts"],"sourcesContent":["//\n// core\n//\n// Copyright (c) 2025 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n\n/*\nexport const testoo = function<O, K extends keyof O>(o : O, k : K, v : any) => O;\n\nexport const testoo  = function(o : O, k : string, v : any) {\n  o[k] = v;\n  return o;\n};\n*/\n\n\nexport function testoo<O extends HTMLElement | SVGElement, K extends keyof O>(o : O, k : K, v : O[K]) : O;\nexport function testoo(o : any, k : string, v : any) {\n  o[k] = v;\n  return o;\n};\n\n\ntype EventListener = (event : {type : string}, detail? : any) => void;\n\ntype ElementParams = {[k : string] : any};\n\ntype ELType = HTMLElement | SVGElement;\n\ntype DOMWrapper = {\n  $el : ELType;\n  on(type : string, l : EventListener) : DOMWrapper;\n  off(type : string, l : EventListener) : DOMWrapper;\n  attrs(params : ElementParams) : DOMWrapper;\n  props(params : ElementParams) : DOMWrapper;\n  style(params : ElementParams) : DOMWrapper;\n  append($elm : DOMWrapper) : DOMWrapper;\n  remove($elm : DOMWrapper) : DOMWrapper;\n};\n/*\nexport const extend = function(o : any, a : any) {\n  for (let k in a) {\n    o[k] = a[k];\n  }\n  return o;\n};\n*/\nexport function extend<S, T, U extends S & T>(o : S, a : T) : U;\nexport function extend(o : any, a : any) : any {\n  for (let k in a) {\n    o[k] = a[k];\n  }\n  return o;\n};\n\nexport const eventTarget = function() {\n  let listenersMap : { [type : string] : EventListener[]} | null  = null;\n  return {\n    trigger: function(type : string, detail : any) {\n      if (!listenersMap) return;\n      const listeners = listenersMap[type];\n      if (!listeners) return;\n      const event = { type : type };\n      listeners.forEach(function(l) {\n        l(event, detail);\n      });\n    },\n    on: function(type : string, l : EventListener) {\n      listenersMap = (listenersMap || (listenersMap = {}) );\n      (listenersMap[type] || (listenersMap[type] = []) ).push(l);\n    },\n    off: function(type : string, l : EventListener) {\n      if (!listenersMap) return;\n      const listeners = listenersMap[type];\n      if (!listeners) return;\n      listenersMap[type] = listeners.filter(function(_l) {\n        return _l != l;\n      });\n    }\n  };\n};\n\n\nexport const domWrapper = function() {\n\n  const svgTagNames : { [tagName : string] : boolean } = {};\n  'svg g path rect circle text'.split(/\\s+/g).forEach(function(tagName) {\n    svgTagNames[tagName] = true;\n  });\n\n  return function(elm : HTMLElement | SVGElement | string) : DOMWrapper {\n    if (typeof elm == 'string') {\n      //elm = elm.toLowerCase();\n      elm = svgTagNames[elm]?\n          document.createElementNS('http://www.w3.org/2000/svg', elm) :\n            document.createElement(elm);\n    }\n    return {\n      $el: elm,\n      on: function(type, l) {\n        this.$el.addEventListener(type, l);\n        return this;\n      },\n      off: function(type, l) {\n        this.$el.removeEventListener(type, l);\n        return this;\n      },\n      attrs: function(params) {\n        for (let k in params) {\n          this.$el.setAttribute(k, '' + params[k]);\n        }\n        return this\n      },\n      props: function(this : any, params) {\n        for (let k in params) {\n          this.$el[k] = params[k];\n        }\n        return this\n      },\n      style: function(this : any, params) {\n        for (let k in params) {\n          this.$el.style[k] = '' + params[k];\n        }\n        return this\n      },\n      append: function($elm) {\n        this.$el.appendChild($elm.$el);\n        return this;\n      },\n      remove: function($elm) {\n        this.$el.removeChild($elm.$el);\n        return this;\n      }\n    };\n  };\n}();\n","//\n// math\n//\n// Copyright (c) 2025 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n\nimport { extend } from './core';\n\nexport function d2r(deg : number) { return deg / 180 * Math.PI }\nexport function r2d(rad : number) { return rad / Math.PI * 180 }\n\nfunction inv(m : number[]) {\n  const det = m[0] * m[3] - m[1] * m[2];\n  return [m[3] / det, -m[1] / det, -m[2] / det, m[0] / det];\n}\n\nexport function getCrossPoint(a : number[], va : number[], b : number[], vb : number[]) {\n  const m = inv([va[0], -vb[0], va[1], -vb[1]]);\n  const v = [b[0] - a[0], b[1] - a[1]];\n  //const st = [m[0] * v[0] + m[1] * v[1], m[2] * v[0] + m[3] * v[1]];\n  //return [a[0] + va[0] * st[0], a[1] + va[1] * st[0]];\n  const s = m[0] * v[0] + m[1] * v[1];\n  return [a[0] + va[0] * s, a[1] + va[1] * s];\n}\n\nexport type QuadPointsOpts = {\n  fn : (t : number) => number[];\n  min : number;\n  max : number;\n  n : number;\n  dt : number;\n}\n\nexport function getQuadPoints(opts : QuadPointsOpts) {\n\n  opts = extend({\n    fn : function(t : number) { return [t, t] },\n    min : 0, max : 1, n : 10, dt : 0.1\n  }, opts);\n\n  // delta points\n  const points = [];\n  !function() : any {\n    for (let i = 0; i <= opts.n; i += 1) {\n      const t = (opts.max - opts.min) * i / opts.n + opts.min;\n      points.push([opts.fn(t), opts.fn(t + opts.dt)]);\n    }\n  }();\n\n  const quadPoints = [];\n  !function() : any {\n    for (let i = 0; i < opts.n; i += 1) {\n      let z = getCrossPoint(\n        [points[i][0][0],\n         points[i][0][1]],\n        [points[i][1][0] - points[i][0][0],\n         points[i][1][1] - points[i][0][1]],\n        [points[i + 1][0][0],\n         points[i + 1][0][1]],\n        [points[i + 1][1][0] - points[i + 1][0][0],\n         points[i + 1][1][1] - points[i + 1][0][1]]\n      );\n      if (i == 0) {\n        quadPoints.push([points[i][0][0], points[i][0][1]]);\n        \n      }\n      if (isNaN(z[0]) ) {\n        z = points[i][0];\n      }\n      quadPoints.push([z[0], z[1], points[i + 1][0][0], points[i + 1][0][1]]);\n    }\n  }();\n  const qp : any = quadPoints;\n  qp.points = points;\n  return quadPoints;\n};\n","//\n// mat4\n//\n// Copyright (c) 2025 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n\nexport type NumArray = number[];\n\nexport type Mat4Funcs = {\n  concat(m : NumArray) : Mat4;\n  transform(m : NumArray) : NumArray;\n  translateX(t : number) : Mat4;\n  translateY(t : number) : Mat4;\n  translateZ(t : number) : Mat4;\n  scaleX(s : number) : Mat4;\n  scaleY(s : number) : Mat4;\n  scaleZ(s : number) : Mat4;\n  rotateX(r : number) : Mat4;\n  rotateY(r : number) : Mat4;\n  rotateZ(r : number) : Mat4;\n  translate(t : { x : number, y : number, z : number}) : Mat4;\n  scale(s : { x : number, y : number, z : number} | number) : Mat4;\n  transpose() : NumArray;\n  invert() : Mat4;\n}\n\nexport type Mat4 = NumArray & Mat4Funcs;\n\nconst fn : Mat4Funcs = {\n  concat : function(n) {\n    const m : any = this;\n    const o = [];\n    o.length = 16;\n    for (let i = 0; i < o.length; i += 1) {\n      let v = 0;\n      for (let j = 0; j < 4; j += 1) {\n        v += m[~~(i / 4) * 4 + j] * n[i % 4 + j * 4];\n      }\n      o[i] = v;\n    }\n    return mat4(o);\n  },\n  transform : function(n) {\n    const m : any = this;\n    const o = [];\n    o.length = n.length;\n    for (let i = 0; i < o.length; i += 1) {\n      let v = 0;\n      for (let j = 0; j < n.length; j += 1) {\n        v += m[j * 4 + i] * n[j];\n      }\n      o[i] = v;\n    }\n    return o;\n  },\n  translateX : function(t) {\n    return this.concat([\n                       1, 0, 0, 0,\n                       0, 1, 0, 0,\n                       0, 0, 1, 0,\n                       t, 0, 0, 1 ]);\n  },\n  translateY : function(t) {\n    return this.concat([\n                       1, 0, 0, 0,\n                       0, 1, 0, 0,\n                       0, 0, 1, 0,\n                       0, t, 0, 1 ]);\n  },\n  translateZ : function(t) {\n    return this.concat([\n                       1, 0, 0, 0,\n                       0, 1, 0, 0,\n                       0, 0, 1, 0,\n                       0, 0, t, 1 ]);\n  },\n  scaleX : function(s) {\n    return this.concat([\n                       s, 0, 0, 0,\n                       0, 1, 0, 0,\n                       0, 0, 1, 0,\n                       0, 0, 0, 1 ]);\n  },\n  scaleY : function(s) {\n    return this.concat([\n                       1, 0, 0, 0,\n                       0, s, 0, 0,\n                       0, 0, 1, 0,\n                       0, 0, 0, 1 ]);\n  },\n  scaleZ : function(s) {\n    return this.concat([\n                       1, 0, 0, 0,\n                       0, 1, 0, 0,\n                       0, 0, s, 0,\n                       0, 0, 0, 1 ]);\n  },\n  rotateX : function(r) {\n    const c = Math.cos(r);\n    const s = Math.sin(r);\n    return this.concat([\n                       1, 0, 0, 0,\n                       0, c, s, 0,\n                       0,-s, c, 0,\n                       0, 0, 0, 1 ]);\n  },\n  rotateY : function(r) {\n    const c = Math.cos(r);\n    const s = Math.sin(r);\n    return this.concat([\n                       c, 0,-s, 0,\n                       0, 1, 0, 0,\n                       s, 0, c, 0,\n                       0, 0, 0, 1 ]);\n  },\n  rotateZ : function(r) {\n    const c = Math.cos(r);\n    const s = Math.sin(r);\n    return this.concat([\n                       c, s, 0, 0,\n                      -s, c, 0, 0,\n                       0, 0, 1, 0,\n                       0, 0, 0, 1 ]);\n  },\n  translate : function(t) {\n    return this\n      .translateX(t.x || 0)\n      .translateY(t.y || 0)\n      .translateZ(t.z || 0);\n  },\n  scale : function(s) {\n    if (typeof s == 'number') {\n      return this.scale({ x: s, y: s, z: s });\n    }\n    return this\n      .scaleX(s.x || 1)\n      .scaleY(s.y || 1)\n      .scaleZ(s.z || 1);\n  },\n  transpose : function() {\n    const m : any = this;\n    return m.map(function(_ : number, i : number) {\n      return m[(i % 4) * 4 + ~~(i / 4)];\n    });\n  },\n  invert : function() {\n    const m : any = this;\n    const inv = [\n      m[5] * m[10] * m[15] - m[5] * m[11] * m[14] - m[9] * m[6] * m[15] +\n        m[9] * m[7] * m[14] + m[13] * m[6] * m[11] - m[13] * m[7] * m[10],\n      -m[1] * m[10] * m[15] + m[1] * m[11] * m[14] + m[9] * m[2] * m[15] -\n        m[9] * m[3] * m[14] - m[13] * m[2] * m[11] + m[13] * m[3] * m[10],\n      m[1] * m[6] * m[15] - m[1] * m[7] * m[14] - m[5] * m[2] * m[15] +\n        m[5] * m[3] * m[14] + m[13] * m[2] * m[7] - m[13] * m[3] * m[6],\n      -m[1] * m[6] * m[11] + m[1] * m[7] * m[10] + m[5] * m[2] * m[11] -\n        m[5] * m[3] * m[10] - m[9] * m[2] * m[7] + m[9] * m[3] * m[6],\n      -m[4] * m[10] * m[15] + m[4] * m[11] * m[14] + m[8] * m[6] * m[15] -\n        m[8] * m[7] * m[14] - m[12] * m[6] * m[11] + m[12] * m[7] * m[10],\n      m[0] * m[10] * m[15] - m[0] * m[11] * m[14] - m[8] * m[2] * m[15] +\n        m[8] * m[3] * m[14] + m[12] * m[2] * m[11] - m[12] * m[3] * m[10],\n      -m[0] * m[6] * m[15] + m[0] * m[7] * m[14] + m[4] * m[2] * m[15] -\n        m[4] * m[3] * m[14] - m[12] * m[2] * m[7] + m[12] * m[3] * m[6],\n      m[0] * m[6] * m[11] - m[0] * m[7] * m[10] - m[4] * m[2] * m[11] +\n        m[4] * m[3] * m[10] + m[8] * m[2] * m[7] - m[8] * m[3] * m[6],\n      m[4] * m[9] * m[15] - m[4] * m[11] * m[13] - m[8] * m[5] * m[15] +\n        m[8] * m[7] * m[13] + m[12] * m[5] * m[11] - m[12] * m[7] * m[9],\n      -m[0] * m[9] * m[15] + m[0] * m[11] * m[13] + m[8] * m[1] * m[15] -\n        m[8] * m[3] * m[13] - m[12] * m[1] * m[11] + m[12] * m[3] * m[9],\n      m[0] * m[5] * m[15] - m[0] * m[7] * m[13] - m[4] * m[1] * m[15] +\n        m[4] * m[3] * m[13] + m[12] * m[1] * m[7] - m[12] * m[3] * m[5],\n      -m[0] * m[5] * m[11] + m[0] * m[7] * m[9] + m[4] * m[1] * m[11] -\n        m[4] * m[3] * m[9] - m[8] * m[1] * m[7] + m[8] * m[3] * m[5],\n      -m[4] * m[9] * m[14] + m[4] * m[10] * m[13] + m[8] * m[5] * m[14] -\n        m[8] * m[6] * m[13] - m[12] * m[5] * m[10] + m[12] * m[6] * m[9],\n      m[0] * m[9] * m[14] - m[0] * m[10] * m[13] - m[8] * m[1] * m[14] +\n        m[8] * m[2] * m[13] + m[12] * m[1] * m[10] - m[12] * m[2] * m[9],\n      -m[0] * m[5] * m[14] + m[0] * m[6] * m[13] + m[4] * m[1] * m[14] -\n        m[4] * m[2] * m[13] - m[12] * m[1] * m[6] + m[12] * m[2] * m[5],\n      m[0] * m[5] * m[10] - m[0] * m[6] * m[9] - m[4] * m[1] * m[10] +\n        m[4] * m[2] * m[9] + m[8] * m[1] * m[6] - m[8] * m[2] * m[5]\n    ];\n    const det = m[0] * inv[0] + m[1] * inv[4] + m[2] * inv[8] + m[3] * inv[12];\n    return mat4(inv.map(function(v) { return v / det; }) );\n  }\n\n};\n\nObject.setPrototypeOf(fn, Object.getPrototypeOf(Array) );\n\nconst identity : () => NumArray = function() {\n  return [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1];\n};\n\nexport function mat4(m? : NumArray) : Mat4 {\n  m = m || identity();\n  Object.setPrototypeOf(m, fn);\n  return m as Mat4;\n};\n\nexport default mat4;\n","//\n// util\n//\n// Copyright (c) 2025 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n\nimport * as math from './math';\n\nexport type PathBuilder = {\n  moveTo(x : number, y : number) : PathBuilder;\n  lineTo(x : number, y : number) : PathBuilder;\n  quadTo(cx : number, cy : number, x : number, y : number) : PathBuilder;\n  cubicTo(cx1 : number, cy1 : number, cx2 : number, cy2 : number, x : number, y : number) : PathBuilder;\n  close() : PathBuilder;\n  build() : string;\n}\n\nexport type TranBuilder = {\n  translate(x : number, y : number) : TranBuilder;\n  rotate(rad : number) : TranBuilder;\n  scale(x : number, y : number) : TranBuilder;\n  skewX(rad : number) : TranBuilder;\n  skewY(rad : number) : TranBuilder;\n  build() : string;\n}\n\nexport function pathBuilder() : PathBuilder {\n  let d = '';\n  return {\n    moveTo(x, y) { d += 'M' + x + ' ' + y; return this; },\n    lineTo(x, y) { d += 'L' + x + ' ' + y; return this; },\n    quadTo(cx, cy, x, y) {\n      d += 'Q' + cx + ' ' + cy +' ' + x + ' ' + y; return this; },\n    cubicTo(cx1, cy1, cx2, cy2, x, y) {\n      d += 'C' + cx1 + ' ' + cy1 +' ' + cx2 + ' ' + cy2 +' ' +\n        x + ' ' + y; return this; },\n    close() { d += 'Z'; return this; },\n    build() { return d; }\n  };\n};\n\nexport function tranBuilder() :TranBuilder {\n  let t = '';\n  return {\n    translate(x, y) {\n      t += 'translate(' + x + ' ' + y + ')'; return this; },\n    rotate(rad) { t += 'rotate(' + math.r2d(rad) + ')'; return this; },\n    scale(x, y) {\n      t += 'scale(' + x + ' ' + y + ')'; return this; },\n    skewX(rad) {\n      t += 'skewX(' + math.r2d(rad) + ')'; return this; },\n    skewY(rad) {\n      t += 'skewY(' + math.r2d(rad) + ')'; return this; },\n    build() { return t; }\n  };\n};\n","//\n// svgtk\n//\n// Copyright (c) 2025 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n\nimport * as core from './core';\nimport * as math from './math';\nimport * as mat4 from './mat4';\nimport * as util from './util';\n\nexport default {\n  core,\n  math,\n  util,\n  mat4 : mat4.mat4\n}\n"],"names":["testoo","o","k","v","extend","a","eventTarget","listenersMap","type","detail","listeners","event","l","_l","domWrapper","svgTagNames","tagName","elm","params","$elm","d2r","deg","r2d","rad","inv","m","det","getCrossPoint","va","b","vb","s","getQuadPoints","opts","t","points","i","quadPoints","z","qp","fn","n","j","mat4","r","c","_","identity","pathBuilder","d","x","y","cx","cy","cx1","cy1","cx2","cy2","tranBuilder","math.r2d","svgtk","core","math","util","mat4.mat4"],"mappings":"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"}