"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const w=require("./svgtk.js"),z=w.core.extend,b=w.math.getQuadPoints,v=w.util.pathBuilder,G=w.mat4,q=function(n,o){return Math.sqrt(o*o/(n*n)-1)},g=function(n,o){return function(i){return[n*Math.cos(i+o)+n*i*Math.sin(i+o),n*Math.sin(i+o)-n*i*Math.cos(i+o)]}},y={n:3,dt:.05},O=function(n){n=z({m:20,z:20,a:Math.PI*20/180},n);const o=n.m,i=n.z,f=i*o,e=f-2.5*o,r=f+2*o;let t=f*Math.cos(n.a)/2;t=Math.max(t,e/2);const u=Math.PI*2*0,s=q(t,r/2),d=g(t,0)(q(t,f/2)),M=-Math.atan(d[1]/d[0]),l=v();let a,c,I=0;for(let x=0;x<i;x+=1){for(c=b({fn:g(t,M+I),min:u,max:s,n:y.n,dt:y.dt}),a=0;a<c.length;a+=1)a==0?x==0&&l.moveTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);for(I+=Math.PI/i,c=b({fn:g(t,-M+I),min:-s,max:u,n:y.n,dt:y.dt}),a=0;a<c.length;a+=1)a==0?l.lineTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);I+=Math.PI/i,function(){let m;const T=e/2,P=[];m=Math.PI/i*(x*2+1)-M,P.push([T*Math.cos(m),T*Math.sin(m)]),m=Math.PI/i*(x*2+1.5),P.push([T*Math.cos(m),T*Math.sin(m)]),m=Math.PI/i*(x*2+2)+M,P.push([T*Math.cos(m),T*Math.sin(m)]),m=Math.PI/i*(x*2+2)+M,P.push([t*Math.cos(m),t*Math.sin(m)]),l.quadTo(P[0][0],P[0][1],P[1][0],P[1][1]),l.quadTo(P[2][0],P[2][1],P[3][0],P[3][1])}()}return l.close(),{m:o,z:i,d:f,d1:e,d2:r,r:t,tMin:u,tMax:s,t0:M,path:l.build()}},A=function(n){n=z({m:20,z:20,a:Math.PI*20/180},n);const o=n.m,i=n.z,f=i*o,e=f+2.5*o,r=f-2*o;let t=f*Math.cos(n.a)/2;t=Math.max(t,r/2);const u=Math.PI*2*0,s=q(t,e/2),d=g(t,0)(q(t,f/2)),M=-Math.atan(d[1]/d[0]),l=v();let a,c,I=0;for(let x=0;x<i;x+=1){for(c=b({fn:g(t,-M+I),min:-s,max:u,n:y.n,dt:y.dt}),a=0;a<c.length;a+=1)a==0?x==0&&l.moveTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);for(I+=Math.PI/i,c=b({fn:g(t,M+I),min:u,max:s,n:y.n,dt:y.dt}),a=0;a<c.length;a+=1)a==0?l.lineTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);I+=Math.PI/i,function(){let m;const T=e/2;m=Math.PI/i*(x*2+1.5)-M,l.lineTo(T*Math.cos(m),T*Math.sin(m))}()}return l.close(),{m:o,z:i,d:f,d1:e,d2:r,r:t,tMin:u,tMax:s,t0:M,path:l.build()}},Q=function(n){n=z({r1:100,r2:200,r3:10,r4:10,w:10,a:Math.PI/2,offsetAngle:0},n);const o=[];(function(){const e=Math.asin((n.w/2+n.r3)/(n.r1+n.r3)),r=n.r1*Math.cos(e),h=n.r1*Math.sin(e),t=Math.atan2(h,r);o.push({order:0,cx:0,cy:0,r:n.r1,t0:n.a-t,t1:t})})(),function(){let e;(function(r){const h=n.r1*Math.cos(r),t=n.r1*Math.sin(r),u=(n.r1+n.r3)*Math.cos(r),s=(n.r1+n.r3)*Math.sin(r),d=Math.atan2(t-s,h-u),M=Math.atan2(n.w/2-s,0);o.push({order:1,cx:u,cy:s,r:n.r3,t0:d,t1:M}),e=M-d})(Math.asin((n.w/2+n.r3)/(n.r1+n.r3))),function(r){const h=n.r1*Math.cos(r),t=n.r1*Math.sin(r),u=(n.r1+n.r3)*Math.cos(r),s=(n.r1+n.r3)*Math.sin(r),d=Math.atan2(t-s,h-u),M=d-e;o.push({order:5,cx:u,cy:s,r:n.r3,t0:M,t1:d})}(n.a-Math.asin((n.w/2+n.r3)/(n.r1+n.r3)))}(),function(){const e=Math.asin((n.w/2+n.r4)/(n.r2-n.r4)),r=n.r2*Math.cos(e),h=n.r2*Math.sin(e),t=Math.atan2(h,r);o.push({order:3,cx:0,cy:0,r:n.r2,t0:t,t1:n.a-t})}(),function(){let e;(function(r){const h=n.r2*Math.cos(r),t=n.r2*Math.sin(r),u=(n.r2-n.r4)*Math.cos(r),s=(n.r2-n.r4)*Math.sin(r),d=Math.atan2(n.w/2-s,0),M=Math.atan2(t-s,h-u);o.push({order:2,cx:u,cy:s,r:n.r4,t0:d,t1:M}),e=M-d})(Math.asin((n.w/2+n.r4)/(n.r2-n.r4))),function(r){const h=n.r2*Math.cos(r),t=n.r2*Math.sin(r),u=(n.r2-n.r4)*Math.cos(r),s=(n.r2-n.r4)*Math.sin(r),d=Math.atan2(t-s,h-u),M=d+e;o.push({order:4,cx:u,cy:s,r:n.r4,t0:d,t1:M})}(n.a-Math.asin((n.w/2+n.r4)/(n.r2-n.r4)))}(),o.sort(function(e,r){return e.order<r.order?-1:1});const i=G().rotateZ(n.offsetAngle),f=v();return o.forEach(function(e){const h=b({fn:function(t){return[e.r*Math.cos(t)+e.cx,e.r*Math.sin(t)+e.cy]},min:e.t0,max:e.t1,n:4,dt:.05});for(let t=0;t<h.length;t+=1)h[t]=i.transform([h[t][0],h[t][1]]).concat(i.transform([h[t][2],h[t][3]])),t==0?e.order==0?f.moveTo(h[t][0],h[t][1]):(e.order==2||e.order==5)&&f.lineTo(h[t][0],h[t][1]):f.quadTo(h[t][0],h[t][1],h[t][2],h[t][3])}),f.close(),{path:f.build()}};exports.createGear=O;exports.createInnerGear=A;exports.createPie=Q;
//# sourceMappingURL=gear-util.js.map
