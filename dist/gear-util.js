"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const w=require("./core.js"),z=require("./svgtk.js"),y=require("./math.js"),v=require("./mat4.js"),b=function(t,o){return Math.sqrt(o*o/(t*t)-1)},q=function(t,o){return function(i){return[t*Math.cos(i+o)+t*i*Math.sin(i+o),t*Math.sin(i+o)-t*i*Math.cos(i+o)]}},T={n:3,dt:.05},Q=function(t){t=w.extend({m:20,z:20,a:Math.PI*20/180},t);const o=t.m,i=t.z,d=i*o,e=d-2.5*o,r=d+2*o;let n=d*Math.cos(t.a)/2;n=Math.max(n,e/2);const u=Math.PI*2*0,s=b(n,r/2),f=q(n,0)(b(n,d/2)),M=-Math.atan(f[1]/f[0]),l=z.pathBuilder();let a,c,g=0;for(let x=0;x<i;x+=1){for(c=y.getQuadPoints({fn:q(n,M+g),min:u,max:s,n:T.n,dt:T.dt}),a=0;a<c.length;a+=1)a==0?x==0&&l.moveTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);for(g+=Math.PI/i,c=y.getQuadPoints({fn:q(n,-M+g),min:-s,max:u,n:T.n,dt:T.dt}),a=0;a<c.length;a+=1)a==0?l.lineTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);g+=Math.PI/i,function(){let m;const I=e/2,P=[];m=Math.PI/i*(x*2+1)-M,P.push([I*Math.cos(m),I*Math.sin(m)]),m=Math.PI/i*(x*2+1.5),P.push([I*Math.cos(m),I*Math.sin(m)]),m=Math.PI/i*(x*2+2)+M,P.push([I*Math.cos(m),I*Math.sin(m)]),m=Math.PI/i*(x*2+2)+M,P.push([n*Math.cos(m),n*Math.sin(m)]),l.quadTo(P[0][0],P[0][1],P[1][0],P[1][1]),l.quadTo(P[2][0],P[2][1],P[3][0],P[3][1])}()}return l.close(),{m:o,z:i,d,d1:e,d2:r,r:n,tMin:u,tMax:s,t0:M,path:l.build()}},G=function(t){t=w.extend({m:20,z:20,a:Math.PI*20/180},t);const o=t.m,i=t.z,d=i*o,e=d+2.5*o,r=d-2*o;let n=d*Math.cos(t.a)/2;n=Math.max(n,r/2);const u=Math.PI*2*0,s=b(n,e/2),f=q(n,0)(b(n,d/2)),M=-Math.atan(f[1]/f[0]),l=z.pathBuilder();let a,c,g=0;for(let x=0;x<i;x+=1){for(c=y.getQuadPoints({fn:q(n,-M+g),min:-s,max:u,n:T.n,dt:T.dt}),a=0;a<c.length;a+=1)a==0?x==0&&l.moveTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);for(g+=Math.PI/i,c=y.getQuadPoints({fn:q(n,M+g),min:u,max:s,n:T.n,dt:T.dt}),a=0;a<c.length;a+=1)a==0?l.lineTo(c[a][0],c[a][1]):l.quadTo(c[a][0],c[a][1],c[a][2],c[a][3]);g+=Math.PI/i,function(){let m;const I=e/2;m=Math.PI/i*(x*2+1.5)-M,l.lineTo(I*Math.cos(m),I*Math.sin(m))}()}return l.close(),{m:o,z:i,d,d1:e,d2:r,r:n,tMin:u,tMax:s,t0:M,path:l.build()}},B=function(t){t=w.extend({r1:100,r2:200,r3:10,r4:10,w:10,a:Math.PI/2,offsetAngle:0},t);const o=[];(function(){const e=Math.asin((t.w/2+t.r3)/(t.r1+t.r3)),r=t.r1*Math.cos(e),h=t.r1*Math.sin(e),n=Math.atan2(h,r);o.push({order:0,cx:0,cy:0,r:t.r1,t0:t.a-n,t1:n})})(),function(){let e;(function(r){const h=t.r1*Math.cos(r),n=t.r1*Math.sin(r),u=(t.r1+t.r3)*Math.cos(r),s=(t.r1+t.r3)*Math.sin(r),f=Math.atan2(n-s,h-u),M=Math.atan2(t.w/2-s,0);o.push({order:1,cx:u,cy:s,r:t.r3,t0:f,t1:M}),e=M-f})(Math.asin((t.w/2+t.r3)/(t.r1+t.r3))),function(r){const h=t.r1*Math.cos(r),n=t.r1*Math.sin(r),u=(t.r1+t.r3)*Math.cos(r),s=(t.r1+t.r3)*Math.sin(r),f=Math.atan2(n-s,h-u),M=f-e;o.push({order:5,cx:u,cy:s,r:t.r3,t0:M,t1:f})}(t.a-Math.asin((t.w/2+t.r3)/(t.r1+t.r3)))}(),function(){const e=Math.asin((t.w/2+t.r4)/(t.r2-t.r4)),r=t.r2*Math.cos(e),h=t.r2*Math.sin(e),n=Math.atan2(h,r);o.push({order:3,cx:0,cy:0,r:t.r2,t0:n,t1:t.a-n})}(),function(){let e;(function(r){const h=t.r2*Math.cos(r),n=t.r2*Math.sin(r),u=(t.r2-t.r4)*Math.cos(r),s=(t.r2-t.r4)*Math.sin(r),f=Math.atan2(t.w/2-s,0),M=Math.atan2(n-s,h-u);o.push({order:2,cx:u,cy:s,r:t.r4,t0:f,t1:M}),e=M-f})(Math.asin((t.w/2+t.r4)/(t.r2-t.r4))),function(r){const h=t.r2*Math.cos(r),n=t.r2*Math.sin(r),u=(t.r2-t.r4)*Math.cos(r),s=(t.r2-t.r4)*Math.sin(r),f=Math.atan2(n-s,h-u),M=f+e;o.push({order:4,cx:u,cy:s,r:t.r4,t0:f,t1:M})}(t.a-Math.asin((t.w/2+t.r4)/(t.r2-t.r4)))}(),o.sort(function(e,r){return e.order<r.order?-1:1});const i=v.mat4().rotateZ(t.offsetAngle),d=z.pathBuilder();return o.forEach(function(e){const r=function(n){return[e.r*Math.cos(n)+e.cx,e.r*Math.sin(n)+e.cy]},h=y.getQuadPoints({fn:r,min:e.t0,max:e.t1,n:4,dt:.05});for(let n=0;n<h.length;n+=1)h[n]=i.transform([h[n][0],h[n][1]]).concat(i.transform([h[n][2],h[n][3]])),n==0?e.order==0?d.moveTo(h[n][0],h[n][1]):(e.order==2||e.order==5)&&d.lineTo(h[n][0],h[n][1]):d.quadTo(h[n][0],h[n][1],h[n][2],h[n][3])}),d.close(),{path:d.build()}};exports.createGear=Q;exports.createInnerGear=G;exports.createPie=B;
//# sourceMappingURL=gear-util.js.map
